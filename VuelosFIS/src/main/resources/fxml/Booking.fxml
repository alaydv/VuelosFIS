<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.control.PasswordField?>

<ScrollPane fitToWidth="true" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.vuelosfis.view.javafx.BookingController" styleClass="root">
    <VBox spacing="15.0">
        <padding>
            <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
        </padding>

        <HBox alignment="CENTER_LEFT" spacing="10">
            <Button text="←" onAction="#handleBack" styleClass="secondary-button" />
            <Label text="Confirmar Reserva" styleClass="header-label" />
        </HBox>

        <VBox styleClass="card" spacing="10">
            <Label text="Detalles del Vuelo" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
            <Label fx:id="flightInfoLabel" text="Cargando..." />
        </VBox>

        <Separator />

        <Label text="Datos del Pasajero" styleClass="subheader-label" />
        <GridPane hgap="15" vgap="15">
            <Label text="ID Cliente (opcional):" GridPane.columnIndex="0" GridPane.rowIndex="0" />
            <TextField fx:id="clientIdField" promptText="Ej: 1001" GridPane.columnIndex="1" GridPane.rowIndex="0" />

            <Label text="Nombre Completo:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
            <TextField fx:id="paxNameField" promptText="Nombre del pasajero" GridPane.columnIndex="1" GridPane.rowIndex="1" />

            <Label text="Pasaporte / ID:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
            <TextField fx:id="paxPassportField" promptText="Número de documento" GridPane.columnIndex="1" GridPane.rowIndex="2" />
        </GridPane>

        <Separator />

        <Label text="Servicios Adicionales" styleClass="subheader-label" />
        <VBox spacing="10">
             <CheckBox fx:id="extraLuggageCheck" text="Equipaje Adicional (23kg) - $50 USD" />
             <CheckBox fx:id="premiumFoodCheck" text="Comida Premium - $30 USD" />
        </VBox>

        <Separator />

        <Label text="Método de Pago" styleClass="subheader-label" />
        <HBox spacing="20">
            <RadioButton fx:id="payCard" text="Tarjeta Crédito" selected="true">
                <toggleGroup>
                    <ToggleGroup fx:id="paymentGroup" />
                </toggleGroup>
            </RadioButton>
            <RadioButton fx:id="payPayPal" text="PayPal" toggleGroup="$paymentGroup"/>
            <RadioButton fx:id="payLifeMiles" text="LifeMiles" toggleGroup="$paymentGroup"/>
        </HBox>

        <!-- Container for Card Details -->
        <VBox fx:id="cardDetailsBox" spacing="10">
            <Label text="Datos de Tarjeta" style="-fx-font-weight: bold;"/>
            <GridPane hgap="15" vgap="15">
                <Label text="Número de Tarjeta:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                <TextField fx:id="cardNumberField" promptText="0000 0000 0000 0000" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                <Label text="Titular:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                <TextField fx:id="cardHolderField" promptText="Como aparece en la tarjeta" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                <Label text="Expiración (MM/YY):" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                <TextField fx:id="cardExpiryField" promptText="00/00" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                <Label text="CVV:" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                <TextField fx:id="cardCvvField" promptText="123" GridPane.columnIndex="3" GridPane.rowIndex="2" maxWidth="60"/>
            </GridPane>
        </VBox>

        <!-- Container for PayPal Details -->
        <VBox fx:id="paypalDetailsBox" spacing="10" visible="false" managed="false">
             <Label text="Cuenta PayPal" style="-fx-font-weight: bold;"/>
             <GridPane hgap="15" vgap="15">
                <Label text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                <TextField fx:id="paypalEmailField" promptText="usuario@email.com" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                
                <Label text="Token/Password:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                <PasswordField fx:id="paypalTokenField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
             </GridPane>
        </VBox>

        <!-- Container for LifeMiles Details -->
        <VBox fx:id="lifemilesDetailsBox" spacing="10" visible="false" managed="false">
             <Label text="Redención de Millas" style="-fx-font-weight: bold;"/>
             <GridPane hgap="15" vgap="15">
                <Label text="Número LifeMiles:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                <TextField fx:id="lifemilesAccountField" promptText="LM-12345678" GridPane.columnIndex="1" GridPane.rowIndex="0" />
             </GridPane>
        </VBox>

        <Label fx:id="messageLabel" text="" style="-fx-text-fill: red;" />

        <HBox alignment="CENTER_RIGHT" spacing="20.0">
            <Button text="Pagar y Confirmar" onAction="#handleConfirm" styleClass="button" />
        </HBox>

    </VBox>
</ScrollPane>
